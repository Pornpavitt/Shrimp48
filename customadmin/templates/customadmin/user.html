{% extends 'customadmin/components/site_header.html' %}

{% block title %} Add Users{% endblock %}

{% block content %}
<table class="min-w-min divide-y divide-gray-200">
    <thead class="bg-gray-50">
        <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">First Name</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Name</th>
            <!-- <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Active</th> -->
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Edit</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Delete</th>
        </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-100">
        {% for user in users %}
        {% if user.is_active %}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap">{{ user.username }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ user.email }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ user.first_name }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ user.last_name }}</td>
                <!-- <td class="px-6 py-4 whitespace-nowrap">Active</td> -->
                <td class="px-6 py-4 whitespace-nowrap"><button class="text-blue-500 hover:text-blue-700"><a href="{% url 'edit_user' user.id %}" >Edit</a></td></button>
                <td class="px-6 py-4 whitespace-nowrap"><button class="text-red-500 hover:text-red-700 ml-2" ><a href="{% url 'delete_user' user.id %}" >Delete</a></td></button>
            </tr>
        {% endif %}
    {% endfor %}
    </tbody>
</table>
<!-- JavaScript for the confirmation popup -->
<script>
    function confirmDelete(userId) {
        if (confirm("Are you sure you want to delete this user?")) {
            // If user confirms deletion, redirect to delete URL
            window.location.href = "{% url 'delete_user' user.id %}?user_id=" + userId;
        } else {
            // If user cancels deletion, do nothing
            return false;
        }
    }
</script>
{% endblock %}